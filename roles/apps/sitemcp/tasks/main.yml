---
# SiteMCP installation tasks

- name: Install sitemcp globally via npm
  shell: npm install -g sitemcp
  become: yes
  when: app_states['sitemcp'] | default('present') == 'present'
  register: sitemcp_install
  failed_when: false
  changed_when: sitemcp_install.rc == 0

- name: Uninstall sitemcp globally via npm
  shell: npm uninstall -g sitemcp
  become: yes
  when: app_states['sitemcp'] | default('present') == 'absent'
  register: sitemcp_uninstall
  failed_when: false
  changed_when: sitemcp_uninstall.rc == 0
