---
# System role - core system configuration

- name: Import nala package manager installation
  ansible.builtin.import_tasks: nala.yml
  tags: [nala, packages]

- name: Import core packages installation
  ansible.builtin.import_tasks: packages.yml
  tags: [packages]

- name: Import COSMIC theme color extraction
  ansible.builtin.import_tasks: cosmic-theme.yml
  tags: [cosmic, theme, colors]

- name: Import hostname configuration
  ansible.builtin.import_tasks: hostname.yml
  tags: [hostname]

- name: Import user management tasks
  ansible.builtin.import_tasks: users.yml
  tags: [users]

- name: Import Python packages installation
  ansible.builtin.import_tasks: python.yml
  tags: [python, dev]

- name: Include Ansible tooling installation
  ansible.builtin.include_role:
    name: system/ansible
  tags: [ansible, dev]

- name: Include Go language installation
  ansible.builtin.include_role:
    name: system/go
  tags: [go, dev, golang]

- name: Include Node.js installation
  ansible.builtin.include_role:
    name: system/nodejs
  tags: [nodejs, node, npm, dev]

- name: Include Docker installation
  ansible.builtin.include_role:
    name: system/docker
  tags: [docker, containers, dev]

- name: Include libvirt virtualization
  ansible.builtin.include_role:
    name: system/libvirt
  tags: [libvirt, virtualization, virt]

- name: Include IAC tools (Terraform, gcloud CLI)
  ansible.builtin.include_role:
    name: system/iac
  tags: [iac, terraform, gcloud, dev]

- name: Import flatpak configuration
  ansible.builtin.import_tasks: flatpak.yml
  tags: [flatpak]

- name: Import fish shell configuration
  ansible.builtin.import_tasks: fish.yml
  tags: [fish, shell]

- name: Include git role
  ansible.builtin.include_role:
    name: system/git
  tags: [git]

- name: Import SSH configuration
  ansible.builtin.import_tasks: ssh.yml
  tags: [ssh]

# GPG import disabled - see TODO.md for configuration requirements
# - name: Import GPG configuration
#   import_tasks: gpg.yml
#   tags: [gpg]

- name: Import firewall configuration
  ansible.builtin.import_tasks: firewall.yml
  tags: [firewall]

- name: Import Tailscale VPN configuration
  ansible.builtin.import_tasks: tailscale.yml
  tags: [tailscale, vpn]

- name: Import power management configuration
  ansible.builtin.import_tasks: power-management.yml
  tags: [power, power-management, wake]

- name: Include justfile system management
  ansible.builtin.include_role:
    name: system/justfile
  tags: [justfile, system-admin]
